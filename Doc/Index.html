<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>General HTTP Handling Remark</title>
  <style type="text/css">
    body {
      font-size: 16pt;
      counter-reset: level1;
    }

    h2 {
      font-size: 1.5em;
    }

    h3 {
      font-size: 1.4em;
    }

    h4 {
      font-size: 1.3em;
    }

    h5 {
      font-size: 1.2em;
    }

    h6 {
      font-size: 1.1em;
    }

    nav ul {
      list-style-type: none;
      line-height: 1.3em;
    }

    nav :link, nav :visited {
      text-decoration: none;
    }

    section, section > p, section > ol, section > ul {
      margin-left: 1.5em;
      margin-right: 2em;
    }

    nav.toc {
      counter-reset: toc_level1;
    }

    nav a:visited {
      color: blue;
    }

    nav.toc ul.secondLevel {
      counter-reset: toc_level2;
    }

    nav.toc ul.thirdLevel {
      counter-reset: toc_level3;
    }

    nav.toc ul.firstLevel > li > span:before {
      content: counter(toc_level1);
      counter-increment: toc_level1;
    }

    nav.toc ul.secondLevel > li > span:before {
      content: counter(toc_level1) "." counter(toc_level2);
      counter-increment: toc_level2;
    }

    nav.toc ul.thirdLevel > li > span:before {
      content: counter(toc_level1) "." counter(toc_level2) "." counter(toc_level3);
      counter-increment: toc_level3;
    }

    section.firstLevel {
      counter-reset: level2;
    }

    section.secondLevel {
      counter-reset: level3;
    }

    section.firstLevel > header > h4:before {
      content: counter(level1) " ";
      counter-increment: level1;
    }

    section.secondLevel > header > h5:before {
      content: counter(level1) "." counter(level2) " ";
      counter-increment: level2;
    }

    section.thirdLevel > header > h6:before {
      content: counter(level1) "." counter(level2) "." counter(level3) " ";
      counter-increment: level3;
    }

    #GoToTOC {
      display: block;
      position: fixed;
      top: 90%;
      left: 5px;
      background: url(Common/Image/ImageSprite.png) no-repeat scroll -331px -3px;
      background-color: rgba(0, 0, 0, 0);
      width: 40px;
      height: 40px;
      overflow: hidden;
      opacity: 0.6;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <h2 style="text-align: center;">General HTTP Handling Remark</h2>
  <section>
    <h3>This solution's purpose is as below:</h3>
    <p>
      <ul>
        <li>Routes HTTP handling.</li>
        <li>Provides some handling methods (download file, write file stream to HTTP response, script service etc.). Of course, extensions are supported.</li>
        <li>Provides a script service execution engine.</li>
        <li>Automatically generates JavaScript intellisense file to help code.</li>
        <li>Minimize JavaScript code file to improve download speed.</li>
      </ul>
    </p>
    <hr />
  </section>
  <section id="TOC">
    <h3>Table of Contents</h3>
    <nav class="toc">
      <ul class="firstLevel">
        <li>
          <span></span> <a href="#Analysis">Analysis</a>
          <ul class="secondLevel">
            <li><span></span> <a href="#RouteHandling">Route Handling</a></li>
            <li><span></span> <a href="#EmitScriptService">Emit Script Service</a></li>
            <li><span></span> <a href="#CallServiceFromClient">Call Service Method from Client</a></li>
            <li><span></span> <a href="#GenerateJSIntellisense">Generate Intellisense JavaScript Code for Corresponding Service Component</a></li>
            <li><span></span> <a href="#JSMinifier">Minimize JavaScript Code</a></li>
          </ul>
        </li>
        <li class="firstLevel">
          <span></span> <a href="#Design">Design</a>
          <ul class="secondLevel">
            <li>
              <span></span> <a href="#Design_Architeture">Architecture</a>
              <ul class="thirdLevel">
                <li><span></span> <a href="#Design_Architecture_PackageDependencies">Package and Its Dependencies</a></li>
                <li><span></span> <a href="#Design_Architectur_SubPackages">Packages</a></li>
              </ul>
            </li>
            <li>
              <span></span> <a href="#Design_General">General</a>
              <ul class="thirdLevel">
                <li><span></span> <a href="#Design_General_HandlerRouting">Handler Routing</a></li>
                <li><span></span> <a href="#Design_General_HandlerRequestURLComposition">Handler Request URL Composition</a></li>
                <li><span></span> <a href="#Design_General_CallServiceComponent">Client Call to Service Component</a></li>
              </ul>
            </li>
            <li>
              <span></span> <a href="#Design_Detail">Detail</a>
            </li>
          </ul>
        </li>
        <li class="firstLevel">
          <span></span> <a href="#Implementation">Implementation</a>
          <ul class="secondLevel">
            <li><span></span> <a href="#ImplHandlerRouting">Handler Routing</a></li>
            <li><span></span> <a href="#ImplScriptService">Script Service</a></li>
            <li><span></span> <a href="#ImplCallService">Call Service</a></li>
            <li><span></span> <a href="#ImplGenerateIntellisenceJS">Generate Intellisense JavaScript Code</a></li>
            <li><span></span> <a href="#ImplMinifier">Minimize JavaScript Code</a></li>
          </ul>
        </li>
        <li class="firstLevel"><span></span> <a href="#Reference">Reference</a></li>
      </ul>
    </nav>
    <hr />
  </section>
  <section id="Analysis" class="firstLevel">
    <header>
      <h4>Analysis</h4>
    </header>
    <p>
      Now our system has many HTTP handlers to process multiple different requests. We can provide only one HTTP handler to process any type of requests by provide routing method. And when we want to call server method, we use different user defined protocol to design handler. So we need develop an engine to call the server method directly (all details (such as data serialization/deserialization, client asynchronous invoking &amp; callbacks etc.) should be encapsulated).
    </p>
    <section id="RouteHandling" class="secondLevel">
      <header>
        <h5>Route Handling</h5>
      </header>
      <p>
        There should be routing method to process different requests.
      </p>
    </section>
    <section id="EmitScriptService" class="secondLevel">
      <header>
        <h5>Emit Script Service</h5>
      </header>
      <p>
        Frequent used client components should be reused easily. It can be combine to new apply by an easy method.
      </p>
    </section>
    <section id="CallServiceFromClient" class="secondLevel">
      <header>
        <h5>Call Service Method from Client</h5>
      </header>
      <p>
        This should be straightforward from client and server.
      </p>
    </section>
    <section id="GenerateJSIntellisense" class="secondLevel">
      <header>
        <h5>Generate Intellisense JavaScript Code for Corresponding Service Component</h5>
      </header>
      <p>
        Should provide a tool to generate the code to reference for intellisense.
      </p>
    </section>
    <section id="JSMinifier" class="secondLevel">
      <header>
        <h5>Minimize JavaScript Code</h5>
      </header>
      <p>
        By configurable method to minimize the code.
      </p>
    </section>
    <hr />
  </section>
  <section id="Design" class="firstLevel">
    <header>
      <h4>Design</h4>
    </header>
    <section id="Design_Architeture" class="secondLevel">
      <header>
        <h5>Architecture</h5>
      </header>
      <section id="Design_Architecture_PackageDependencies" class="thirdLevel">
        <header>
          <h6>Package and Its Dependencies</h6>
        </header>
        <p>
          All functions should be encapsulated into on package - GeneralHttpHandling. Its dependencies is as below:
        </p>
        <p>
          <img src="Design/Image/Package_Dependency.PNG" alt="Package Dependency" width="500" />
        </p>
      </section>
      <section id="Design_Architectur_SubPackages" class="thirdLevel">
        <header>
          <h6>Sub-Packages</h6>
        </header>
        <p>Main sub-packages and their dependencies:</p>
        <p>
          <img src="Design/Image/Subpackages.PNG" alt="Sub-Packages" width="300" />
        </p>
      </section>
    </section>
    <section id="Design_General" class="secondLevel">
      <header>
        <h5>General</h5>
      </header>
      <section id="Design_General_HandlerRouting" class="thirdLevel">
        <header>
          <h6>Handler Routing</h6>
        </header>
        <p>
          The flow is as below:
        </p>
        <p>
          <img src="Design/Image/GeneralFlowChart-RouteHandler.PNG" alt="Route Handler" width="500" />
        </p>
      </section>
      <section id="Design_General_HandlerRequestURLComposition" class="thirdLevel">
        <header>
          <h6>Handler Request URL Composition</h6>
        </header>
        <p>
          The flow is as below:
        </p>
        <p>
          <img src="Design/Image/GeneralFlowChart-ComposeHandlerURL.PNG" alt="Compose Handler URL" width="400" />
        </p>
      </section>
      <section id="Design_General_CallServiceComponent" class="thirdLevel">
        <header>
          <h6>Client Call to Service Component</h6>
        </header>
        <p>
          <img src="Design/Image/GeneralFlowChart-CallServiceComponent.PNG" alt="Cient (Page) Call to Service Component" />
        </p>
        <p>
          The call engine is responsible for:
        </p>
        <ul>
          <li>Select service component method.</li>
          <li>Serialize/Deserialize args &amp; result.</li>
        </ul>
      </section>
    </section>
    <section id="Design_Detail" class="secondLevel">
      <header>
        <h5>Detail</h5>
      </header>
    </section>
    <hr />
  </section>
  <section id="Implementation" class="firstLevel">
    <header>
      <h4>Implementation</h4>
    </header>
    <section id="ImplHandlerRouting" class="secondLevel">
      <header>
        <h5>Handler Routing</h5>
      </header>
    </section>
    <section id="ImplScriptService" class="secondLevel">
      <header>
        <h5>Script Service</h5>
      </header>
    </section>
    <section id="ImplCallService" class="secondLevel">
      <header>
        <h5>Call Service</h5>
      </header>
    </section>
    <section id="ImplGenerateIntellisenceJS" class="secondLevel">
      <header>
        <h5>Generate Intellisense JavaScript Code</h5>
      </header>
    </section>
    <section id="ImplMinifier" class="secondLevel">
      <header>
        <h5>Minimize JavaScript Code</h5>
      </header>
    </section>
    <hr />
  </section>
  <section id="Reference" class="firstLevel">
    <header>
      <h4>Reference</h4>
    </header>
    <ol type="a">
      <li>
        <a href="https://github.com/billsoff/General-HTTP-Handling" target="_blank">
          This project on GitHub
        </a>
      </li>
      <li>
        <a href="https://developers.google.com/web/fundamentals/getting-started/primers/promises" target="_blank">JavaScript Promises: an Introduction</a>
      </li>
      <li>
        <a href="http://api.jquery.com/category/deferred-object/" target="_blank">jQuery Deferred Object</a>
      </li>
      <li>
        <a href="https://msdn.microsoft.com/en-us/library/system.web.ihttphandler(v=vs.110).aspx" target="_blank">IHttpHandler Interface</a>
      </li>
      <li>
        <a href="https://msdn.microsoft.com/en-us/library/bb385682(v=vs.120).aspx" target="_blank">JavaScript IntelliSense</a>
      </li>
      <li>
        <a href="https://github.com/toptensoftware/MiniME" target="_blank">
          Open source JavaScript Minimizer in C#
        </a>
      </li>
    </ol>
    <hr />
  </section>
  <a id="GoToTOC" href="#TOC" title="Table of Contents" />
</body>
</html>